(function(t){function e(e){for(var r,i,o=e[0],c=e[1],l=e[2],u=0,f=[];u<o.length;u++)i=o[u],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&f.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);d&&d(e);while(f.length)f.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],r=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(r=!1)}r&&(s.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},a={paintingboard:0},s=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var d=c;s.push([1,"chunk-vendors"]),n()})({1:function(t,e,n){t.exports=n("8552")},1664:function(t,e,n){"use strict";var r=n("d6bf"),a=n.n(r);a.a},"1c98":function(t,e,n){"use strict";var r=n("26c8"),a=n.n(r);a.a},"1f8d":function(t,e,n){"use strict";var r=n("e9ed"),a=n.n(r);a.a},"26c8":function(t,e,n){},"325e":function(t,e,n){},"3e48":function(t,e,n){},5794:function(t,e,n){"use strict";var r=n("bc06"),a=n.n(r);a.a},"5ad2":function(t,e,n){"use strict";var r=n("325e"),a=n.n(r);a.a},"5fb0":function(t,e,n){"use strict";var r=n("e775"),a=n.n(r);a.a},8552:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"navbar_area"},[n("my-navbar",{attrs:{selected:3}}),n("painting-navbar",{attrs:{title:"无标题-我的作品"},on:{"require-score":t.showScoreHandle,undo:t.undoChildCanvas,restore:t.restoreChildCanvas,download:t.downloadChildCanvas}})],1),n("my-grid",{scopedSlots:t._u([{key:"picture",fn:function(){return[n("painting-pic",{attrs:{"pic-src":t.picSrc}})]},proxy:!0},{key:"board",fn:function(){return[n("draw-board",{ref:"childCanvas",attrs:{"pen-width":t.widths[t.selectedPen],"pen-color":t.colors[t.selectedColor],"is-eraser":0===t.selectedPen,"show-score":t.showScore,score:t.score,"score-comment":t.scoreComment}})]},proxy:!0},{key:"toolbar",fn:function(){return[n("painting-toolbar",{attrs:{"selected-pen":t.selectedPen,"selected-color":t.selectedColor},on:{"change-pen":function(e){t.selectedPen=e},"change-color":function(e){t.selectedColor=e}}})]},proxy:!0}])})],1)},s=[],i=(n("e25e"),n("8d58")),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"my_grid"},[t._t("picture"),t._t("board")],2),n("div",{staticClass:"bottom_area"},[n("div",{staticClass:"toolbar_area"},[t._t("toolbar")],2)])])},c=[],l={name:"PaintingBoardGrid"},d=l,u=(n("e2a0"),n("2877")),f=Object(u["a"])(d,o,c,!1,null,"91099fce",null),p=f.exports,h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"outer",staticClass:"painting_board",attrs:{id:"outer"}},[n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showScore,expression:"showScore"}],staticClass:"score_mask"},[n("div",{staticClass:"score_box"},[n("div",{staticClass:"score_text"},[t._v("您的得分:"+t._s(" "+t.score))]),n("div",{staticClass:"comment_text"},[t._v(t._s(t.scoreComment))])])])]),n("canvas",{ref:"canvas",staticClass:"draw_canvas",attrs:{id:"canvas"}}),n("a",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"download",attrs:{href:"javascript:void(0);",download:"picture.png"}})],1)},v=[],m=(n("cb29"),n("a9e3"),{name:"PaintingBoard",props:{penWidth:{type:Number,default:4},penColor:{type:String,default:"#ff3860"},isEraser:{type:Boolean,default:!1},showScore:{type:Boolean,default:!0},score:{type:Number,default:50},scoreComment:{type:String,default:"lalala"}},data:function(){return{canvas:this.$refs.canvas,context:null,isPainting:!1,lastX:0,lastY:0,historyList:[],nowIndex:-1,maxIndex:-1}},mounted:function(){var t=this;this.getCanvas(),setTimeout((function(){t.canvas.style.width="100%",t.canvas.style.height="100%",t.canvas.width=t.canvas.offsetWidth,t.canvas.height=t.canvas.offsetHeight,t.context.fillStyle="#fff",t.context.fillRect(0,0,t.canvas.width,t.canvas.height)}),800);var e=this;function n(t,n,r){e.context.save(),e.isEraser?e.context.fillStyle="#ffffff":e.context.fillStyle=e.penColor,e.context.beginPath(),e.context.arc(t,n,r,0,2*Math.PI),e.context.closePath(),e.context.fill()}function r(t,n,r,a){e.context.lineWidth=e.penWidth,e.context.lineCap="round",e.context.lineJoin="round",e.isEraser?e.context.strokeStyle="#ffffff":e.context.strokeStyle=e.penColor,e.context.beginPath(),e.context.moveTo(t,n),e.context.lineTo(r,a),e.context.stroke(),e.context.closePath()}function a(t){e.isPainting=!0;var r=t.offsetX,a=t.offsetY;e.lastX=r,e.lastY=a,n(r,a,e.penWidth/2)}function s(t){if(e.isPainting){var n=t.offsetX,a=t.offsetY;r(e.lastX,e.lastY,n,a),e.lastX=n,e.lastY=a}}function i(){if(e.isPainting){e.isPainting=!1;var t=e.canvas.toDataURL();e.nowIndex++,e.historyList[e.nowIndex]=t,e.maxIndex=e.nowIndex}}this.canvas.onpointerdown=a,this.canvas.onpointermove=s,this.canvas.onpointerup=i},methods:{getCanvas:function(){this.canvas=this.$refs.canvas,this.context=this.canvas.getContext("2d")},undo:function(){var t=this;if(this.nowIndex>=0){this.nowIndex--;var e=new Image;e.src=this.historyList[this.nowIndex];var n=this.canvas.width,r=this.canvas.height;this.context.clearRect(0,0,n,r),e.onload=function(){t.context.drawImage(e,0,0,e.width,e.height,0,0,n,r)}}},restore:function(){var t=this;if(this.nowIndex<this.maxIndex){this.nowIndex++;var e=new Image;e.src=this.historyList[this.nowIndex];var n=this.canvas.width,r=this.canvas.height;this.context.clearRect(0,0,n,r),e.onload=function(){t.context.drawImage(e,0,0,e.width,e.height,0,0,n,r)}}},download:function(){this.$refs.download.href=this.canvas.toDataURL("image/png"),this.$refs.download.click()}}}),g=m,b=(n("dfd7"),Object(u["a"])(g,h,v,!1,null,"3f02dd13",null)),_=b.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card"},[t._m(0),n("div",{staticClass:"pic_content"},[n("img",{staticClass:"picture",attrs:{src:t.picSrc}})])])},w=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("span",{staticClass:"header_title"},[t._v("临摹对象")]),n("button",{staticClass:"select_button"},[t._v("选择图片")])])}],x={name:"PaintingPicture",props:{picSrc:String}},y=x,S=(n("5794"),Object(u["a"])(y,C,w,!1,null,"7e431f5a",null)),k=S.exports,P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bar"},[n("pen-tools",{staticClass:"pen_tool_area",attrs:{"selected-pen":t.selectedPen},on:{"change-pen":function(e){return t.$emit("change-pen",e)}}}),n("color-tools",{staticClass:"color_tool_area",attrs:{"selected-color":t.selectedColor},on:{"change-color":function(e){return t.$emit("change-color",e)}}})],1)},$=[],j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},t._l(t.pens,(function(e){return n("img",{key:e.id,staticClass:"pen",class:{active:e.id===t.selectedPen},attrs:{src:e.src},on:{click:function(n){return t.$emit("change-pen",e.id)}}})})),0)},O=[],I={name:"PenTools",props:{selectedPen:Number},data:function(){return{pens:[{id:0,src:"pic_res/painting_toolbar/pen/eraser.svg"},{id:1,src:"pic_res/painting_toolbar/pen/pen.svg"},{id:2,src:"pic_res/painting_toolbar/pen/pencil.svg"},{id:3,src:"pic_res/painting_toolbar/pen/mark-1.svg"},{id:4,src:"pic_res/painting_toolbar/pen/mark-2.svg"}]}}},E=I,N=(n("1c98"),Object(u["a"])(E,j,O,!1,null,"8dea3e62",null)),T=N.exports,B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},t._l(t.colors,(function(e){return n("img",{key:e.id,staticClass:"color",class:{active:e.id===t.selectedColor},attrs:{src:e.src},on:{click:function(n){return t.$emit("change-color",e.id)}}})})),0)},M=[],X={name:"ColorTools",props:{selectedColor:Number},data:function(){return{colors:[{id:0,src:"pic_res/painting_toolbar/color/lightGreen.svg"},{id:1,src:"pic_res/painting_toolbar/color/green.svg"},{id:2,src:"pic_res/painting_toolbar/color/darkCyan.svg"},{id:3,src:"pic_res/painting_toolbar/color/darkBlue.svg"},{id:4,src:"pic_res/painting_toolbar/color/black.svg"},{id:5,src:"pic_res/painting_toolbar/color/milk.svg"},{id:6,src:"pic_res/painting_toolbar/color/yellow.svg"},{id:7,src:"pic_res/painting_toolbar/color/red.svg"}]}}},L=X,Y=(n("1f8d"),Object(u["a"])(L,B,M,!1,null,"45bbbdd7",null)),R=Y.exports,W={name:"PaintingToolbar",components:{"pen-tools":T,"color-tools":R},props:{selectedPen:Number,selectedColor:Number}},q=W,H=(n("ddaf"),Object(u["a"])(q,P,$,!1,null,"1fcfff9a",null)),J=H.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navbar"},[n("div",[n("img",{staticClass:"button_img left",attrs:{src:t.backSrc}}),n("img",{staticClass:"button_img right",staticStyle:{transform:"scaleX(-1)"},attrs:{src:t.undoSrc},on:{click:function(e){return t.$emit("restore")}}}),n("img",{staticClass:"button_img right",attrs:{src:t.undoSrc},on:{click:function(e){return t.$emit("undo")}}})]),n("div"),n("div",{staticClass:"center_area"},[n("img",{staticClass:"button_img right",attrs:{src:t.editSrc}}),n("div",{staticClass:"title_area"},[t._v(t._s(t.title))])]),n("div"),n("div",[n("img",{staticClass:"button_img right",attrs:{src:t.saveSrc},on:{click:function(e){return t.$emit("download")}}}),n("img",{staticClass:"button_img right",attrs:{src:t.shareSrc},on:{click:function(e){return t.$emit("require-score")}}})])])},D=[],G={name:"PaintingBoardNavbar",props:{title:String},data:function(){return{backSrc:"./pic_res/painting_toolbar/button/back.svg",undoSrc:"./pic_res/painting_toolbar/button/undo.svg",editSrc:"./pic_res/painting_toolbar/button/edit.svg",saveSrc:"./pic_res/painting_toolbar/button/save.svg",shareSrc:"./pic_res/painting_toolbar/button/提交.png"}}},U=G,z=(n("5fb0"),Object(u["a"])(U,A,D,!1,null,"edce9d5a",null)),F=z.exports,K={name:"app",data:function(){return{picSrc:"./pic_res/other/大护法-临摹.jpg",selectedPen:1,selectedColor:1,widths:[30,2,1,20,4],colors:["#bfdacb","#4b876b","#5c7f83","#354858","#111111","#f6e6cc","#ebb344","#cc4a2b"],showScore:!1,score:0,scoreComment:""}},components:{"my-navbar":i["a"],"my-grid":p,"draw-board":_,"painting-pic":k,"painting-toolbar":J,"painting-navbar":F},methods:{showScoreHandle:function(){var t=this;function e(t,e){return parseInt(Math.random()*(e-t+1)+t,10)}this.score=e(5,99),this.score>=90?this.scoreComment="你就是达芬奇转世？":this.score>=70?this.scoreComment="诶哟不错哦":this.score>=50?this.scoreComment="勉强能看出来画的是啥":this.score>=40?this.scoreComment="毕...毕加索？":this.score>=30?this.scoreComment="你的画工要加强啦！":this.score>=20?this.scoreComment="有点抽象噢":this.score>=10?this.scoreComment="emmmmm...":this.scoreComment="这是用脚画的吧",this.showScore=!0,setTimeout((function(){t.showScore=!1}),3e3)},undoChildCanvas:function(){this.$refs.childCanvas.undo()},restoreChildCanvas:function(){this.$refs.childCanvas.restore()},downloadChildCanvas:function(){this.$refs.childCanvas.download()}}},Q=K,V=(n("1664"),Object(u["a"])(Q,a,s,!1,null,null,null)),Z=V.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(t){return t(Z)}}).$mount("#app")},"8d58":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navbar_outer",class:{transparent_outer:t.transparent,not_transparent_outer:!t.transparent}},[n("img",{staticClass:"navbar_logo",attrs:{src:"pic_res/logo.png"}}),n("ul",{staticClass:"navbar"},t._l(t.titleArray,(function(e){return n("li",{key:e.id},[n("a",{class:{active:e.id==t.selected},attrs:{href:e.link}},[t._v(t._s(e.title))])])})),0),t._m(0)])},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navbar_button_outer"},[n("button",{staticClass:"navbar_button"},[t._v("登录/注册")])])}],s=(n("a9e3"),{name:"MyNavbar",data:function(){return{titleArray:[{id:0,title:"首页",link:"home.html"},{id:1,title:"国漫",link:"worklist.html"},{id:2,title:"广场",link:"square.html"},{id:3,title:"画板",link:"paintingboard.html"}]}},props:{selected:{type:Number,required:!0},transparent:{type:Boolean,default:!1}}}),i=s,o=(n("5ad2"),n("2877")),c=Object(o["a"])(i,r,a,!1,null,"0a60be2d",null);e["a"]=c.exports},bc06:function(t,e,n){},d6bf:function(t,e,n){},ddaf:function(t,e,n){"use strict";var r=n("3e48"),a=n.n(r);a.a},df1d:function(t,e,n){},dfd7:function(t,e,n){"use strict";var r=n("df1d"),a=n.n(r);a.a},e220:function(t,e,n){},e2a0:function(t,e,n){"use strict";var r=n("e220"),a=n.n(r);a.a},e775:function(t,e,n){},e9ed:function(t,e,n){}});
//# sourceMappingURL=paintingboard.4162391d.js.map